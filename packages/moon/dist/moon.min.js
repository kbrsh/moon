/**
 * Moon v1.0.0-beta.7
 * Copyright 2016-2020 Kabir Shah
 * Released under the MIT License
 * https://moonjs.org
 */
!function(e,r){"undefined"==typeof module?e.Moon=r():module.exports=r()}(this,(function(){"use strict";var e,r;function t(r){var t={};for(var n in e)t[n]=e[n].input();var a=r(t);for(var o in a)e[o].output(a[o])}var n={driver:{input:function(){return r},output:function(e){r=e}}};function a(e,r){this.name=e,this.data=r}var o={};function i(e,r,t){e[t]=r in o?o[r][t]:(o[r]=document.createElement(r))[t]}var s,u,l=null;function c(){}function d(e){var r=e.name;if("text"===r)return document.createTextNode(e.data.data);var t=document.createElement(r),n=e.data;for(var a in n){var o=n[a];if(64===a.charCodeAt(0)){var i=t.MoonEvent;null===i&&(i=t.MoonEvent=new c),i[a]=o,t.addEventListener(a.slice(1),i)}else switch(a){case"attributes":for(var s in o)t.setAttribute(s,o[s]);break;case"style":var u=t.style;for(var l in o)u[l]=o[l];break;case"focus":o&&t.focus();break;case"class":t.className=o;break;case"for":t.htmlFor=o;break;case"children":for(var f=t.MoonChildren=[],v=0;v<o.length;v++){var p=d(o[v]);f.push(p),t.appendChild(p)}break;default:t[a]=o}}return t}c.prototype.handleEvent=function(e){t(this["@"+(l=e).type])},Node.prototype.MoonChildren=null,Node.prototype.MoonEvent=null;for(var f=["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","text","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"],v={node:function(e){return function(r){return new a(e,r)}}},p=function(e){var r=f[e];v[r]=function(e){return new a(r,e)}},m=0;m<f.length;m++)p(m);var h={driver:function(e){for(var r=(u="string"==typeof e?document.querySelector(e):e).attributes,t={},n=0;n<r.length;n++){var o=r[n];t[o.name]=o.value}return s=new a(u.tagName.toLowerCase(),t),{input:function(){return l},output:function(e){if(s.name===e.name)!function e(r,t,n){var a=r.data,o=n.data;for(var s in o){var u=a[s],l=o[s];if(u!==l)if(64===s.charCodeAt(0)){var f=t.MoonEvent;null===f&&(f=t.MoonEvent=new c),s in f?f[s]=l:(f[s]=l,t.addEventListener(s.slice(1),f))}else switch(s){case"attributes":if(void 0===u)for(var v in l)t.setAttribute(v,l[v]);else{for(var p in l){var m=l[p];u[p]!==m&&t.setAttribute(p,m)}for(var h in u)h in l||t.removeAttribute(h)}break;case"style":var b=t.style;if(void 0===u)for(var g in l)b[g]=l[g];else{for(var y in l){var k=l[y];u[y]!==k&&(b[y]=k)}for(var C in u)C in l||(b[C]="")}break;case"focus":l?t.focus():t.blur();break;case"class":t.className=l;break;case"for":t.htmlFor=l;break;case"children":var w=l.length;if(void 0===u)for(var E=t.MoonChildren=[],M=0;M<w;M++){var x=d(l[M]);E.push(x),t.appendChild(x)}else{var A=u.length;if(A===w)for(var N=t.MoonChildren,L=0;L<A;L++){var S=u[L],q=l[L];if(S!==q)if(S.name===q.name)e(S,N[L],q);else{var T=d(q);t.replaceChild(T,N[L]),N[L]=T}}else if(A>w){for(var F=t.MoonChildren,H=0;H<w;H++){var R=u[H],j=l[H];if(R!==j)if(R.name===j.name)e(R,F[H],j);else{var D=d(j);t.replaceChild(D,F[H]),F[H]=D}}for(var G=w;G<A;G++)t.removeChild(F.pop())}else{for(var O=t.MoonChildren,P=0;P<A;P++){var X=u[P],$=l[P];if(X!==$)if(X.name===$.name)e(X,O[P],$);else{var z=d($);t.replaceChild(z,O[P]),O[P]=z}}for(var B=A;B<w;B++){var I=d(l[B]);O.push(I),t.appendChild(I)}}}break;default:t[s]=l}}var J=r.name;for(var K in a)if(!(K in o))if(64===K.charCodeAt(0)){var Q=t.MoonEvent;delete Q[K],t.removeEventListener(K.slice(1),Q)}else switch(K){case"attributes":var U=a.attributes;for(var V in U)t.removeAttribute(V);break;case"focus":t.blur();break;case"class":t.className="";break;case"for":t.htmlFor="";break;case"children":for(var W=a.children.length,Y=t.MoonChildren,Z=0;Z<W;Z++)t.removeChild(Y.pop());break;default:i(t,J,K)}}(s,u,e);else{var r=d(e);u.parentNode.replaceChild(r,u),u=r}s=e}}},m:v},b={driver:{input:function(){return Date.now()},output:function(e){var r=function(r){setTimeout((function(){t(e[r])}),r)};for(var n in e)r(n)}}},g={};for(var y in localStorage)localStorage.hasOwnProperty(y)&&(g[y]=localStorage[y]);var k={driver:{input:function(){return g},output:function(e){for(var r in e){var t=e[r];g[r]!==t&&(localStorage[r]=t)}for(var n in g)n in e||delete localStorage[n];g=e}}},C=null,w=/^([^:]+):\s*([^]*?)\s*$/gm,E={driver:{input:function(){return C},output:function(e){for(var r=function(r){var n=e[r],a=new XMLHttpRequest;if(a.responseType="responseType"in n?n.responseType:"text",a.onload=function(){for(var e,r={},o=a.getAllResponseHeaders();null!==(e=w.exec(o));)r[e[1]]=e[2];C={status:a.status,headers:r,body:a.response},"onLoad"in n&&t(n.onLoad)},a.onerror=function(){C=null,"onError"in n&&t(n.onError)},a.open("method"in n?n.method:"GET",n.url),"headers"in n){var o=n.headers;for(var i in o)a.setRequestHeader(i,o[i])}a.send("body"in n?n.body:null)},n=0;n<e.length;n++)r(n)}}},M=location.pathname;return{data:n,http:E,route:{driver:{input:function(){return M},output:function(e){M=e,history.pushState(null,"",M)}},router:function(e){for(var r=e.route,t="/",n=e.routes,a=1;a<r.length;a++){var o=r[a];"/"===o?(n=(t in n?n[t]:n["/*"])[1],t="/"):t+=o}return(t in n?n[t]:n["/*"])[0](e)}},run:t,storage:k,time:b,use:function(r){e=r},version:"1.0.0-beta.7",view:h}}));